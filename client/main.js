
Template.acTemplate.helpers({

});

import { Template } from 'meteor/templating';
import './container.html';

var chart;
var bar;

Template.acTemplate.rendered = function() {

    var dateTime = {"timeseries": [["2018-04-14 00:00:00", 0.0], ["2018-04-15 00:00:00", 0.0], ["2018-04-16 00:00:00", 0.0], ["2018-04-17 00:00:00", 0.0], ["2018-04-18 00:00:00", 0.0], ["2018-04-19 00:00:00", 0.0], ["2018-04-20 00:00:00", 0.0], ["2018-04-21 00:00:00", 0.0], ["2018-04-22 00:00:00", 0.0], ["2018-04-23 00:00:00", 0.0], ["2018-04-24 00:00:00", 0.0], ["2018-04-25 00:00:00", 0.0], ["2018-04-26 00:00:00", 0.0], ["2018-04-27 00:00:00", 0.0], ["2018-04-28 00:00:00", 0.0], ["2018-04-29 00:00:00", 0.0], ["2018-04-30 00:00:00", 0.0], ["2018-05-01 00:00:00", 0.0], ["2018-05-02 00:00:00", 0.0], ["2018-05-03 00:00:00", 0.0], ["2018-05-04 00:00:00", 0.0], ["2018-05-05 00:00:00", 0.0], ["2018-05-06 00:00:00", 0.0], ["2018-05-07 00:00:00", 0.0], ["2018-05-08 00:00:00", 0.0], ["2018-05-09 00:00:00", 0.0], ["2018-05-10 00:00:00", 0.0], ["2018-05-11 00:00:00", 0.0], ["2018-05-12 00:00:00", 0.0], ["2018-05-13 00:00:00", 0.0], ["2018-05-14 00:00:00", 0.0], ["2018-05-15 00:00:00", 0.0], ["2018-05-16 00:00:00", 0.0], ["2018-05-17 00:00:00", 0.0], ["2018-05-18 00:00:00", 0.0], ["2018-05-19 00:00:00", 0.0], ["2018-05-20 00:00:00", 0.0], ["2018-05-21 00:00:00", 0.0], ["2018-05-22 00:00:00", 0.0], ["2018-05-23 00:00:00", 0.0], ["2018-05-24 00:00:00", 0.0], ["2018-05-25 00:00:00", 0.0], ["2018-05-26 00:00:00", 0.0], ["2018-05-27 00:00:00", 0.0], ["2018-05-28 00:00:00", 0.0], ["2018-05-29 00:00:00", 0.0], ["2018-05-30 00:00:00", 0.0], ["2018-05-31 00:00:00", 0.0], ["2018-06-01 00:00:00", 0.0], ["2018-06-02 00:00:00", 0.0], ["2018-06-03 00:00:00", 0.0], ["2018-06-04 00:00:00", 0.0], ["2018-06-05 00:00:00", 0.0], ["2018-06-06 00:00:00", 0.0], ["2018-06-07 00:00:00", 1.835e-320], ["2018-06-08 00:00:00", 9.63248054055277e-308], ["2018-06-09 00:00:00", 2.800392036674278e-295], ["2018-06-10 00:00:00", 4.505267105894415e-283], ["2018-06-11 00:00:00", 4.01091327100794e-271], ["2018-06-12 00:00:00", 1.9760003390652154e-259], ["2018-06-13 00:00:00", 5.3870595322271935e-248], ["2018-06-14 00:00:00", 8.127136457028057e-237], ["2018-06-15 00:00:00", 6.784913967217294e-226], ["2018-06-16 00:00:00", 3.1345280114010994e-215], ["2018-06-17 00:00:00", 8.01347676249921e-205], ["2018-06-18 00:00:00", 1.1336808879810075e-194], ["2018-06-19 00:00:00", 8.875272273705295e-185], ["2018-06-20 00:00:00", 3.844975365726182e-175], ["2018-06-21 00:00:00", 9.217782466559182e-166], ["2018-06-22 00:00:00", 1.2228702079039915e-156], ["2018-06-23 00:00:00", 8.977497463285944e-148], ["2018-06-24 00:00:00", 3.647129918965388e-139], ["2018-06-25 00:00:00", 8.199137956809472e-131], ["2018-06-26 00:00:00", 1.0200140880525533e-122], ["2018-06-27 00:00:00", 7.0220701390283435e-115], ["2018-06-28 00:00:00", 2.6751317299804992e-107], ["2018-06-29 00:00:00", 5.63957269010242e-100], ["2018-06-30 00:00:00", 6.5791265714648155e-93], ["2018-07-01 00:00:00", 4.247283994149934e-86], ["2018-07-02 00:00:00", 1.5173136927727454e-79], ["2018-07-03 00:00:00", 2.999580141665965e-73], ["2018-07-04 00:00:00", 3.2814559526778126e-67], ["2018-07-05 00:00:00", 1.9865234907741368e-61], ["2018-07-06 00:00:00", 6.654904805675986e-56], ["2018-07-07 00:00:00", 1.233704096257473e-50], ["2018-07-08 00:00:00", 1.265613744303997e-45], ["2018-07-09 00:00:00", 7.184761810469581e-41], ["2018-07-10 00:00:00", 2.25706769077195e-36], ["2018-07-11 00:00:00", 3.92371820670303e-32], ["2018-07-12 00:00:00", 3.7746097033602646e-28], ["2018-07-13 00:00:00", 2.009404224366115e-24], ["2018-07-14 00:00:00", 5.919480394457731e-21], ["2018-07-15 00:00:00", 9.64985702324621e-18], ["2018-07-16 00:00:00", 8.705208701443243e-15], ["2018-07-17 00:00:00", 4.345687701092912e-12], ["2018-07-18 00:00:00", 1.2004908519961594e-09], ["2018-07-19 00:00:00", 1.8351865332126578e-07], ["2018-07-20 00:00:00", 1.5524677564448893e-05], ["2018-07-21 00:00:00", 0.0007267515737956657], ["2018-07-22 00:00:00", 0.018826534716399727], ["2018-07-23 00:00:00", 0.2698831774601684], ["2018-07-24 00:00:00", 2.1409289582248543], ["2018-07-25 00:00:00", 9.398308894959909], ["2018-07-26 00:00:00", 22.83064546470571], ["2018-07-27 00:00:00", 30.69076272750778], ["2018-07-28 00:00:00", 22.83064546470571], ["2018-07-29 00:00:00", 9.398308894959909], ["2018-07-30 00:00:00", 2.1409289582248543], ["2018-07-31 00:00:00", 0.2698831774601684], ["2018-08-01 00:00:00", 0.018826534716399727], ["2018-08-02 00:00:00", 0.0007267515737956657], ["2018-08-03 00:00:00", 1.5524677564448893e-05], ["2018-08-04 00:00:00", 1.8351865332126578e-07], ["2018-08-05 00:00:00", 1.2004908519961594e-09], ["2018-08-06 00:00:00", 4.345687701092912e-12], ["2018-08-07 00:00:00", 8.705208701443243e-15], ["2018-08-08 00:00:00", 9.64985702324621e-18], ["2018-08-09 00:00:00", 5.919480394457731e-21], ["2018-08-10 00:00:00", 2.009404224366115e-24], ["2018-08-11 00:00:00", 3.7746097033602646e-28], ["2018-08-12 00:00:00", 3.92371820670303e-32], ["2018-08-13 00:00:00", 2.25706769077195e-36], ["2018-08-14 00:00:00", 7.184761810469581e-41], ["2018-08-15 00:00:00", 1.265613744303997e-45], ["2018-08-16 00:00:00", 1.233704096257473e-50], ["2018-08-17 00:00:00", 6.654904805675986e-56], ["2018-08-18 00:00:00", 1.9865234907741368e-61], ["2018-08-19 00:00:00", 3.2814559526778126e-67], ["2018-08-20 00:00:00", 2.999580141665965e-73], ["2018-08-21 00:00:00", 1.5173136927727454e-79], ["2018-08-22 00:00:00", 4.247283994149934e-86], ["2018-08-23 00:00:00", 6.5791265714648155e-93], ["2018-08-24 00:00:00", 5.63957269010242e-100], ["2018-08-25 00:00:00", 2.6751317299804992e-107], ["2018-08-26 00:00:00", 7.0220701390283435e-115], ["2018-08-27 00:00:00", 1.0200140880525533e-122]]}

  var data = dateTime.timeseries;
  data.forEach(function(item, index){
    item[0] = moment(item[0]).format('DD MMM');
  });

  function parseJsonDate(jsonDateString){
      return new Date(parseInt(jsonDateString.replace('/Date(', '')));
  };
  //create area chart
  var chart = anychart.line();

    var xLabelsBackground = chart.xAxis().labels().background();
    xLabelsBackground.enabled(true);
    xLabelsBackground.stroke("#cecece");
    xLabelsBackground.cornerType("round");
    xLabelsBackground.corners(5);
    var labels = chart.xAxis().labels();
    labels.fontSize(11);

  //turn on chart animation
  chart.animation(true, 1000);

  //set container id for the chart
  chart.container('container');

  var series = anychart.data.mapAsTable(data);

  for (var i in series) {
      chart.spline(series[i]);
  }

  var yTitle = chart.yAxis().title();
    yTitle.enabled(true);
    yTitle.text("Probability (%)");
    yTitle.align("middle");

  //initiate chart drawing
  chart.draw();

  $('path[data-ac-wrapper]')
};
